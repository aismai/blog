<div class="blogs {{if blogMenuService.blockView 'block' 'list'}}
  {{if (hasPermission 'canDeleteAllBlogs') 'can-delete-all-blogs'}}">

  {{#each filterService.filteredBlogs as |blog|}}
    {{#if blogMenuService.deleteMultiple}}
      <div class="blog {{if blog.isClicked 'blog-clicked'}}
          {{if blogMenuService.deleteMultiple 'delete-multiple'}}"
        {{action 'selectBlog' blog}}>
        <div class="blog-cover">
          <img src="{{blog.cover}}">
        </div>
        <div class="blog-content">
          <a class="blog-title">{{link-to blog.name 'posts' blog.id}}</a>
          <div class="blog-category">
            <span class="">category: {{blog.blogType.name}}</span>
          </div>
          <div class="blog-user">
            <span class="">user: {{blog.user.email}}</span>
          </div>
        </div>
        <div class="blog-footer">
          <span class="blog-actions">
            {{#if (hasPermission 'canDeleteAllBlogs' 'canEditAllBLogs')}}
              {{#has-permission  permissionCode='canEditAllBlogs'}}
                {{#link-to 'blogs.edit' blog.id}}
                  <i class="edit icon"></i>
                {{/link-to}}
              {{/has-permission}}
              {{#has-permission  permissionCode='canDeleteAllBlogs'}}
                <span {{action 'deleteBlog' blog }}>
                  <i class="ban icon"></i>
                </span>
              {{/has-permission}}
            {{else}}
              {{#if (userIsBlogAuthor blog.id)}}
                {{#link-to 'blogs.edit' blog.id}}
                  <i class="edit icon"></i>
                {{/link-to}}
                <span {{action 'deleteBlog' blog }}>
                  <i class="ban icon"></i>
                </span>
              {{/if}}
            {{/if}}
          </span>
          <div class="blog-date">
            <i class="calendar icon"></i>
            {{moment-format blog.created  'D MMMM YYYY'}}
          </div>
        </div>
      </div>
    {{else}}
      {{#link-to 'posts' blog.id}}
        <div class="blog">
          <div class="blog-cover">
            <img src="{{blog.cover}}">
          </div>
          <div class="blog-content">
            <a class="blog-title">{{link-to blog.name 'posts' blog.id}}</a>
            <div class="blog-category">
              <span class="">category: {{blog.blogType.name}}</span>
            </div>
            <div class="blog-user">
              <span class="">user: {{blog.user.email}}</span>
            </div>
          </div>

          <div class="blog-footer">
          <span class="blog-actions">
            {{#if (hasPermission 'canDeleteAllBlogs' 'canEditAllBLogs')}}
              {{#has-permission  permissionCode='canEditAllBlogs'}}
                {{#link-to 'blogs.edit' blog.id}}
                  <i class="edit icon"></i>
                {{/link-to}}
              {{/has-permission}}
              {{#has-permission  permissionCode='canDeleteAllBlogs'}}
                <span {{action 'deleteBlog' blog }}>
                  <i class="ban icon"></i>
                </span>
              {{/has-permission}}
            {{else}}
              {{#if (userIsBlogAuthor blog.id)}}
                {{#link-to 'blogs.edit' blog.id}}
                  <i class="edit icon"></i>
                {{/link-to}}
                <span {{action 'deleteBlog' blog }}>
                  <i class="ban icon"></i>
                </span>
              {{/if}}
            {{/if}}
          </span>
            <div class="blog-date">
              <i class="calendar icon"></i>
              {{moment-format blog.created  'D MMMM YYYY'}}
            </div>
          </div>
        </div>
      {{/link-to}}
    {{/if}}
  {{/each}}
</div>
